namespace = laws

# Constitutional Crisis no longer relevant
# Constitutional crisis over, clean-up unnessecary flags and traits (vassals)
character_event = {
	id = laws.0
	desc = "EVTDESCLAWS0"
	is_triggered_only = yes
	
	trigger = {
		NOT = { liege = { has_character_modifier = constitutional_crisis } }
		OR = {
			trait = pro_ruler
			trait = anti_ruler
		}
	}
	
	option = {
		name = "EVTOPTALAWS0"
		remove_trait = pro_ruler
		remove_trait = anti_ruler
		
		# Crisis Advantages
		clr_character_flag = flag_cached_law_for_ruler
		clr_character_flag = flag_cached_law_against_ruler
		clr_character_flag = flag_cached_liege_for_ruler
		clr_character_flag = flag_cached_liege_against_ruler
		
		# Crisis Type
		clr_character_flag = flag_cached_term_limit_defied
		
		# Crisis Rank
		clr_character_flag = flag_cached_crisis_emperor
		clr_character_flag = flag_cached_crisis_king
		clr_character_flag = flag_cached_crisis_duke
		clr_character_flag = flag_cached_crisis_count
	}
}
province_event = {
	id = laws.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		remove_province_modifier = public_for_count
		remove_province_modifier = public_against_count
		remove_province_modifier = public_for_duke
		remove_province_modifier = public_against_duke
		remove_province_modifier = public_for_king
		remove_province_modifier = public_against_king
		remove_province_modifier = public_for_emperor
		remove_province_modifier = public_against_emperor
	}
}

# The ruler has either lost the title that was in crisis to begin with,
# or has graduated to a higher one and can now sweep it away.
character_event = {
	id = laws.2
	desc = "EVTDESCLAWS2"
	
	trigger = {
		has_character_modifier = constitutional_crisis
		OR = {
			AND = {
				has_character_flag = flag_crisis_emperor
				NOT = { primary_title = { tier = EMPEROR } }
			}
			AND = {
				has_character_flag = flag_crisis_king
				NOT = { primary_title = { tier = KING } }
			}
			AND = {
				has_character_flag = flag_crisis_duke
				NOT = { primary_title = { tier = DUKE } }
			}
			AND = {
				has_character_flag = flag_crisis_count
				NOT = { primary_title = { tier = COUNT } }
			}
		}
	}
	
	option = {
		name = "EVTOPTALAWS2"
		remove_character_modifier = constitutional_crisis
		
		# Crisis Timer
		clr_character_flag = flag_crisis_timer
		
		# Crisis Advantages
		remove_character_modifier = crisis_law_for_ruler
		remove_character_modifier = crisis_law_against_ruler
		remove_character_modifier = crisis_liege_for_ruler
		remove_character_modifier = crisis_liege_against_ruler
		
		# Crisis Type
		clr_character_flag = flag_term_limit_defied
		
		# Crisis Rank
		clr_character_flag = flag_crisis_emperor
		clr_character_flag = flag_crisis_king
		clr_character_flag = flag_crisis_duke
		clr_character_flag = flag_crisis_count
		
		hidden_tooltip = {
			any_realm_character = {
				limit = { liege = { character = ROOT } }
				character_event = { id = laws.0 }
			}
			any_realm_province = {
				limit = { any_province_lord = { character = ROOT } }
				province_event = { id = laws.1 }
			}
		}
	}
}

# Province has crisis-related modifiers, but no crisis
province_event = {
	id = laws.3
	hide_window = yes
	
	trigger = {
		OR = {
			has_province_modifier = public_for_count
			has_province_modifier = public_against_count
			has_province_modifier = public_for_duke
			has_province_modifier = public_against_duke
			has_province_modifier = public_for_king
			has_province_modifier = public_against_king
			has_province_modifier = public_for_emperor
			has_province_modifier = public_against_emperor
		}
		NOT = { any_province_lord = { has_character_modifier = constitutional_crisis } }
		NOT = { any_province_lord = { trait = pro_ruler } }
		NOT = { any_province_lord = { trait = anti_ruler } }
	}
	
	immediate = { province_event = { id = laws.1 } }
}

# Unlanded character moved from crisis court to non-crisis court, clear all flags or traits
character_event = {
	id = laws.4
	hide_window = yes
	
	trigger = {
		NOT = { demesne_size = 1 }
		liege = {
			NOT = { has_character_modifier = constitutional_crisis }
			NOT = {
				any_vassal = {
					OR = {
						trait = pro_ruler
						trait = anti_ruler
					}
				}
			}
		}
		OR = {
			trait = pro_ruler
			trait = anti_ruler
			
			# Crisis Advantages
			has_character_flag = flag_cached_law_for_ruler
			has_character_flag = flag_cached_law_against_ruler
			has_character_flag = flag_cached_liege_for_ruler
			has_character_flag = flag_cached_liege_against_ruler
			
			# Crisis Type
			has_character_flag = flag_cached_term_limit_defied
			
			# Crisis Rank
			has_character_flag = flag_cached_crisis_emperor
			has_character_flag = flag_cached_crisis_king
			has_character_flag = flag_cached_crisis_duke
			has_character_flag = flag_cached_crisis_count
		}
	}
	
	immediate = { character_event = { id = laws.0 } }
}

# Character with crisis caching flags but no pro/anti ruler traits. Clean them up.
character_event = {
	id = laws.5
	hide_window = yes
	
	trigger = {
		NOT = { trait = pro_ruler }
		NOT = { trait = anti_ruler }
		OR = {
			# Crisis Advantages
			has_character_flag = flag_cached_law_for_ruler
			has_character_flag = flag_cached_law_against_ruler
			has_character_flag = flag_cached_liege_for_ruler
			has_character_flag = flag_cached_liege_against_ruler
			
			# Crisis Type
			has_character_flag = flag_cached_term_limit_defied
			
			# Crisis Rank
			has_character_flag = flag_cached_crisis_emperor
			has_character_flag = flag_cached_crisis_king
			has_character_flag = flag_cached_crisis_duke
			has_character_flag = flag_cached_crisis_count
		}
	}
	immediate = {
		# Crisis Advantages
		clr_character_flag = flag_cached_law_for_ruler
		clr_character_flag = flag_cached_law_against_ruler
		clr_character_flag = flag_cached_liege_for_ruler
		clr_character_flag = flag_cached_liege_against_ruler
		
		# Crisis Type
		clr_character_flag = flag_cached_term_limit_defied
		
		# Crisis Rank
		clr_character_flag = flag_cached_crisis_emperor
		clr_character_flag = flag_cached_crisis_king
		clr_character_flag = flag_cached_crisis_duke
		clr_character_flag = flag_cached_crisis_count
	}
}

# Character with crisis-marking flags but no actual crisis modifier. Clean them up, too
character_event = {
	id = laws.6
	hide_window = yes
	
	trigger = {
		NOT = { has_character_modifier = constitutional_crisis }
		OR = {
			# Crisis Timer
			has_character_flag = flag_crisis_timer
		
			# Crisis Advantages
			has_character_modifier = crisis_law_for_ruler
			has_character_modifier = crisis_law_against_ruler
			has_character_modifier = crisis_liege_for_ruler
			has_character_modifier = crisis_liege_against_ruler
			
			# Crisis Type
			has_character_flag = flag_term_limit_defied
			
			# Crisis Rank
			has_character_flag = flag_crisis_emperor
			has_character_flag = flag_crisis_king
			has_character_flag = flag_crisis_duke
			has_character_flag = flag_crisis_count
		}
	}
	immediate = {
		# Crisis Timer
		clr_character_flag = flag_crisis_timer
		
		# Crisis Advantages
		remove_character_modifier = crisis_law_for_ruler
		remove_character_modifier = crisis_law_against_ruler
		remove_character_modifier = crisis_liege_for_ruler
		remove_character_modifier = crisis_liege_against_ruler
		
		# Crisis Type
		clr_character_flag = flag_term_limit_defied
		
		# Crisis Rank
		clr_character_flag = flag_crisis_emperor
		clr_character_flag = flag_crisis_king
		clr_character_flag = flag_crisis_duke
		clr_character_flag = flag_crisis_count
	}
}

# Independent character with crisis vassal flags, obviously no longer relevant, clean them up!
character_event = {
	id = laws.7
	desc = "EVTDESCLAWS7"
	hide_window = yes
	
	only_rulers = yes
	
	trigger = {
		independent = yes
		OR = {
			trait = pro_ruler
			trait = anti_ruler
		}
	}
	
	immediate = { character_event = { id = laws.0 } }
}

# Character has just gained a pro or anti-ruler trait, give them appropriate cache flags
character_event = {
	id = laws.8
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			trait = pro_ruler
			trait = anti_ruler
		}
	}
	
	immediate = {
		# Crisis Advantages
		if = {
			limit = { liege = { has_character_modifier = crisis_law_for_ruler } }
			set_character_flag = flag_cached_law_for_ruler
		}
		if = {
			limit = { liege = { has_character_modifier = crisis_law_against_ruler } }
			set_character_flag = flag_cached_law_against_ruler
		}
		if = {
			limit = { liege = { has_character_modifier = crisis_liege_for_ruler } }
			set_character_flag = flag_cached_liege_for_ruler
		}
		if = {
			limit = { liege = { has_character_modifier = crisis_liege_against_ruler } }
			set_character_flag = flag_cached_liege_against_ruler
		}
		
		# Crisis Type
		if = {
			limit = { liege = { has_character_flag = flag_term_limit_defied } }
			set_character_flag = flag_cached_term_limit_defied
		}
		
		# Crisis Rank
		if = {
			limit = { liege = { has_character_flag = flag_crisis_emperor } }
			set_character_flag = flag_crisis_emperor
		}
		if = {
			limit = { liege = { has_character_flag = flag_crisis_king } }
			set_character_flag = flag_crisis_king
		}
		if = {
			limit = { liege = { has_character_flag = flag_crisis_duke } }
			set_character_flag = flag_crisis_duke
		}
		if = {
			limit = { liege = { has_character_flag = flag_crisis_count } }
			set_character_flag = flag_crisis_count
		}
	}
}

# Inheriting a crisis
# When inheriting a crisis of the wrong title tier for some reason, the crisis is rendered irrelevant
character_event = {
	id = laws.20
	desc = "EVTDESCLAWS20"
	picture = GFX_evt_scandal
	
	only_rulers = yes
	
	trigger = {
		NOT = { has_character_modifier = constitutional_crisis }
		any_vassal = {
			OR = {
				trait = pro_ruler
				trait = anti_ruler
			}
			OR = {
				AND = {
					has_character_flag = flag_cached_crisis_emperor
					NOT = { ROOT = { primary_title = { tier = EMPEROR } } }
				}
				AND = {
					has_character_flag = flag_cached_crisis_king
					NOT = { ROOT = { primary_title = { tier = KING } } }
				}
				AND = {
					has_character_flag = flag_cached_crisis_duke
					NOT = { ROOT = { primary_title = { tier = DUKE } } }
				}
				AND = {
					has_character_flag = flag_cached_crisis_count
					NOT = { ROOT = { primary_title = { tier = COUNT } } }
				}
			}
		}
	}
	
	option = {
		name = "EVTOPTALAWS20"
		hidden_tooltip = {
			any_realm_character = {
				limit = {
					liege = { character = ROOT }
					OR = {
						trait = pro_ruler
						trait = anti_ruler
					}
				}
				character_event = { id = laws.0 }
			}
			any_realm_province = {
				limit = { any_province_lord = { character = ROOT } }
				province_event = { id = laws.1 }
			}
		}
	}
}

# Inheriting a crisis caused by defying term length
character_event = {
	id = laws.30
	desc = "EVTDESCLAWS30"
	picture = GFX_evt_scandal
	
	only_rulers = yes
	
	trigger = {
		NOT = { has_character_modifier = constitutional_crisis }
		any_vassal = {
			OR = {
				trait = pro_ruler
				trait = anti_ruler
			}
			has_character_flag = flag_cached_term_limit_defied
			OR = {
				AND = {
					has_character_flag = flag_cached_crisis_emperor
					ROOT = { primary_title = { tier = EMPEROR } }
				}
				AND = {
					has_character_flag = flag_cached_crisis_king
					ROOT = { primary_title = { tier = KING } }
				}
				AND = {
					has_character_flag = flag_cached_crisis_duke
					ROOT = { primary_title = { tier = DUKE } }
				}
				AND = {
					has_character_flag = flag_cached_crisis_count
					ROOT = { primary_title = { tier = COUNT } }
				}
			}
		}
	}
	
	option = {
		# We don't even HAVE term limits/democracy anymore, the issue is irrelevant!
		trigger = {
			NOT = {
				any_demesne_title = {
					is_primary_holder_title_tier = yes
					OR = {
						has_law = succ_patrician_elective
						has_law = succ_feudal_elective
						has_law = succ_open_elective
						has_law = succ_tanistry
					}
					OR = {
						has_law = term_length_0
						has_law = term_length_1
						has_law = term_length_2
						has_law = term_length_3
					}
				}
			}
		}
		name = "EVTOPTALAWS30"
		custom_tooltip = {
			text = "CRISISIRRELEVANT"
			hidden_tooltip = {
				any_realm_character = {
					limit = { liege = { character = ROOT } }
					character_event = { id = laws.31 } # Inform vassals that crisis is no longer relevant
				}
				any_realm_province = {
					limit = { any_province_lord = { character = ROOT } }
					province_event = { id = laws.1 }
				}
			}
		}
	}
	
	option = {
		# Also irrelevant, but in a different way!
		trigger = {
			any_demesne_title = {
				is_primary_holder_title_tier = yes
				OR = {
					has_law = succ_patrician_elective
					has_law = succ_feudal_elective
					has_law = succ_open_elective
					has_law = succ_tanistry
				}
				OR = {
					has_law = term_length_0
					has_law = term_length_1
					has_law = term_length_2
					has_law = term_length_3
				}
			}
		}
		name = "EVTOPTBLAWS30"
		custom_tooltip = {
			text = "CRISISIRRELEVANT"
			hidden_tooltip = {
				any_realm_character = {
					limit = { liege = { character = ROOT } }
					character_event = { id = laws.32 } # Inform vassals that crisis has been resolved
				}
				any_realm_province = {
					limit = { any_province_lord = { character = ROOT } }
					province_event = { id = laws.1 }
				}
			}
		}
	}
}

# Crisis rendered irrelevant (or resolved)
character_event = {
	id = laws.31
	desc = "EVTDESCLAWS31"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		hidden_tooltip = { character_event = { id = laws.0 } }
	}
}

character_event = {
	id = laws.32
	desc = "EVTDESCLAWS32"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		hidden_tooltip = { character_event = { id = laws.0 } }
	}
}

# Civil Unrest Events
# Growth of civil unrest
province_event = {
	id = laws.200
	desc = "EVTDESCLAWS200"
	picture = GFX_evt_protest
	
	trigger = { NOT = { has_province_modifier = civil_unrest_9 } }
	
	mean_time_to_happen = {
		months = 60
		
		# Constitutional Crisis Effects
		modifier = {
			factor = 0.025
			any_province_lord = { has_character_modifier = constitutional_crisis }
		}
		modifier = {
			factor = 4
			has_province_modifier = public_for_emperor
			owner = {
				OR = {
					has_character_flag = flag_crisis_emperor
					AND = {
						has_character_flag = flag_cache_crisis_emperor
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_for_emperor
			owner = {
				has_character_flag = flag_cache_crisis_emperor
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_for_king
			owner = {
				OR = {
					has_character_flag = flag_crisis_king
					AND = {
						has_character_flag = flag_cache_crisis_king
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_for_king
			owner = {
				has_character_flag = flag_cache_crisis_king
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_for_duke
			owner = {
				OR = {
					has_character_flag = flag_crisis_duke
					AND = {
						has_character_flag = flag_cache_crisis_duke
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_for_duke
			owner = {
				has_character_flag = flag_cache_crisis_duke
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_for_count
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_against_emperor
			owner = {
				OR = {
					has_character_flag = flag_crisis_emperor
					AND = {
						has_character_flag = flag_cache_crisis_emperor
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_against_emperor
			owner = {
				has_character_flag = flag_cache_crisis_emperor
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_against_king
			owner = {
				OR = {
					has_character_flag = flag_crisis_king
					AND = {
						has_character_flag = flag_cache_crisis_king
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_against_king
			owner = {
				has_character_flag = flag_cache_crisis_king
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_against_duke
			owner = {
				OR = {
					has_character_flag = flag_crisis_duke
					AND = {
						has_character_flag = flag_cache_crisis_duke
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_against_duke
			owner = {
				has_character_flag = flag_cache_crisis_duke
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_against_count
		}
		
		# Moral Authority Factors
		modifier = {
			factor = 0.8
			NOT = { religion_authority = 0.1 }
		}
		modifier = {
			factor = 0.8
			NOT = { religion_authority = 0.2 }
		}
		modifier = {
			factor = 0.8
			NOT = { religion_authority = 0.3 }
		}
		modifier = {
			factor = 0.8
			NOT = { religion_authority = 0.4 }
		}
		modifier = {
			factor = 1.25
			religion_authority = 0.6
		}
		modifier = {
			factor = 1.25
			religion_authority = 0.7
		}
		modifier = {
			factor = 1.25
			religion_authority = 0.8
		}
		modifier = {
			factor = 1.25
			religion_authority = 0.9
		}
		
		# Natural resistance
		modifier = {
			factor = 1.25
			OR = {
				has_province_modifier = civil_unrest_0
				has_province_modifier = civil_unrest_1
				has_province_modifier = civil_unrest_2
				has_province_modifier = civil_unrest_3
				has_province_modifier = civil_unrest_4
				has_province_modifier = civil_unrest_5
				has_province_modifier = civil_unrest_6
				has_province_modifier = civil_unrest_7
				has_province_modifier = civil_unrest_8
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_province_modifier = civil_unrest_1
				has_province_modifier = civil_unrest_2
				has_province_modifier = civil_unrest_3
				has_province_modifier = civil_unrest_4
				has_province_modifier = civil_unrest_5
				has_province_modifier = civil_unrest_6
				has_province_modifier = civil_unrest_7
				has_province_modifier = civil_unrest_8
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_province_modifier = civil_unrest_2
				has_province_modifier = civil_unrest_3
				has_province_modifier = civil_unrest_4
				has_province_modifier = civil_unrest_5
				has_province_modifier = civil_unrest_6
				has_province_modifier = civil_unrest_7
				has_province_modifier = civil_unrest_8
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_province_modifier = civil_unrest_3
				has_province_modifier = civil_unrest_4
				has_province_modifier = civil_unrest_5
				has_province_modifier = civil_unrest_6
				has_province_modifier = civil_unrest_7
				has_province_modifier = civil_unrest_8
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_province_modifier = civil_unrest_4
				has_province_modifier = civil_unrest_5
				has_province_modifier = civil_unrest_6
				has_province_modifier = civil_unrest_7
				has_province_modifier = civil_unrest_8
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_province_modifier = civil_unrest_5
				has_province_modifier = civil_unrest_6
				has_province_modifier = civil_unrest_7
				has_province_modifier = civil_unrest_8
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_province_modifier = civil_unrest_6
				has_province_modifier = civil_unrest_7
				has_province_modifier = civil_unrest_8
			}
		}
		modifier = {
			factor = 1.25
			OR = {
				has_province_modifier = civil_unrest_7
				has_province_modifier = civil_unrest_8
			}
		}
		modifier = {
			factor = 1.25
			has_province_modifier = civil_unrest_8
		}
		
		# Other Factors
		modifier = {
			factor = 0.5
			any_province_lord = { war = yes }
		}
		modifier = {
			factor = 0.5
			any_province_lord = { NOT = { religion = ROOT } }
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { has_province_modifier = civil_unrest_8 }
			remove_province_modifier = civil_unrest_8
			add_province_modifier = { name = civil_unrest_9 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_7 }
			remove_province_modifier = civil_unrest_7
			add_province_modifier = { name = civil_unrest_8 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_6 }
			remove_province_modifier = civil_unrest_6
			add_province_modifier = { name = civil_unrest_7 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_5 }
			remove_province_modifier = civil_unrest_5
			add_province_modifier = { name = civil_unrest_6 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_4 }
			remove_province_modifier = civil_unrest_4
			add_province_modifier = { name = civil_unrest_5 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_3 }
			remove_province_modifier = civil_unrest_3
			add_province_modifier = { name = civil_unrest_4 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_2 }
			remove_province_modifier = civil_unrest_2
			add_province_modifier = { name = civil_unrest_3 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_1 }
			remove_province_modifier = civil_unrest_1
			add_province_modifier = { name = civil_unrest_2 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_0 }
			remove_province_modifier = civil_unrest_0
			add_province_modifier = { name = civil_unrest_1 duration = -1 }
		}
		if = {
			limit = {
				NOT = { has_province_modifier = civil_unrest_0 }
				NOT = { has_province_modifier = civil_unrest_1 }
				NOT = { has_province_modifier = civil_unrest_2 }
				NOT = { has_province_modifier = civil_unrest_3 }
				NOT = { has_province_modifier = civil_unrest_4 }
				NOT = { has_province_modifier = civil_unrest_5 }
				NOT = { has_province_modifier = civil_unrest_6 }
				NOT = { has_province_modifier = civil_unrest_7 }
				NOT = { has_province_modifier = civil_unrest_8 }
				NOT = { has_province_modifier = civil_unrest_9 }
			}
			add_province_modifier = { name = civil_unrest_0 duration = -1 }
		}
	}
}

# Decline of civil unrest
province_event = {
	id = laws.201
	desc = "EVTDESCLAWS201"
	picture = GFX_evt_protest
	
	trigger = {
		OR = {
			has_province_modifier = civil_unrest_0
			has_province_modifier = civil_unrest_1
			has_province_modifier = civil_unrest_2
			has_province_modifier = civil_unrest_3
			has_province_modifier = civil_unrest_4
			has_province_modifier = civil_unrest_5
			has_province_modifier = civil_unrest_6
			has_province_modifier = civil_unrest_7
			has_province_modifier = civil_unrest_8
			has_province_modifier = civil_unrest_9
		}
	}
	
	mean_time_to_happen = {
		months = 6
		# Constitutional Crisis Effects
		modifier = {
			factor = 10
			any_province_lord = { has_character_modifier = constitutional_crisis }
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_for_emperor
			owner = {
				OR = {
					has_character_flag = flag_crisis_emperor
					AND = {
						has_character_flag = flag_cache_crisis_emperor
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_for_emperor
			owner = {
				has_character_flag = flag_cache_crisis_emperor
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_for_king
			owner = {
				OR = {
					has_character_flag = flag_crisis_king
					AND = {
						has_character_flag = flag_cache_crisis_king
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_for_king
			owner = {
				has_character_flag = flag_cache_crisis_king
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_for_duke
			owner = {
				OR = {
					has_character_flag = flag_crisis_duke
					AND = {
						has_character_flag = flag_cache_crisis_duke
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_for_duke
			owner = {
				has_character_flag = flag_cache_crisis_duke
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_for_count
		}
		modifier = {
			factor = 4
			has_province_modifier = public_against_emperor
			owner = {
				OR = {
					has_character_flag = flag_crisis_emperor
					AND = {
						has_character_flag = flag_cache_crisis_emperor
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_against_emperor
			owner = {
				has_character_flag = flag_cache_crisis_emperor
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_against_king
			owner = {
				OR = {
					has_character_flag = flag_crisis_king
					AND = {
						has_character_flag = flag_cache_crisis_king
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_against_king
			owner = {
				has_character_flag = flag_cache_crisis_king
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_against_duke
			owner = {
				OR = {
					has_character_flag = flag_crisis_duke
					AND = {
						has_character_flag = flag_cache_crisis_duke
						trait = pro_ruler
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			has_province_modifier = public_against_duke
			owner = {
				has_character_flag = flag_cache_crisis_duke
				trait = anti_ruler
			}
		}
		modifier = {
			factor = 4
			has_province_modifier = public_against_count
		}
		
		# Moral Authority Factors
		modifier = {
			factor = 1.25
			NOT = { religion_authority = 0.1 }
		}
		modifier = {
			factor = 1.25
			NOT = { religion_authority = 0.2 }
		}
		modifier = {
			factor = 1.25
			NOT = { religion_authority = 0.3 }
		}
		modifier = {
			factor = 1.25
			NOT = { religion_authority = 0.4 }
		}
		modifier = {
			factor = 0.8
			religion_authority = 0.6
		}
		modifier = {
			factor = 0.8
			religion_authority = 0.7
		}
		modifier = {
			factor = 0.8
			religion_authority = 0.8
		}
		modifier = {
			factor = 0.8
			religion_authority = 0.9
		}
		modifier = {
			factor = 2
			any_province_lord = { war = yes }
		}
		modifier = {
			factor = 2
			any_province_lord = { NOT = { religion = ROOT } }
		}
	}
	
	option = {
		name = "EVTOPTALAWS201"
		if = {
			limit = { has_province_modifier = civil_unrest_0 }
			remove_province_modifier = civil_unrest_0
		}
		if = {
			limit = { has_province_modifier = civil_unrest_1 }
			remove_province_modifier = civil_unrest_1
			add_province_modifier = { name = civil_unrest_0 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_2 }
			remove_province_modifier = civil_unrest_2
			add_province_modifier = { name = civil_unrest_1 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_3 }
			remove_province_modifier = civil_unrest_3
			add_province_modifier = { name = civil_unrest_2 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_4 }
			remove_province_modifier = civil_unrest_4
			add_province_modifier = { name = civil_unrest_3 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_5 }
			remove_province_modifier = civil_unrest_5
			add_province_modifier = { name = civil_unrest_4 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_6 }
			remove_province_modifier = civil_unrest_6
			add_province_modifier = { name = civil_unrest_5 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_7 }
			remove_province_modifier = civil_unrest_7
			add_province_modifier = { name = civil_unrest_6 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_8 }
			remove_province_modifier = civil_unrest_8
			add_province_modifier = { name = civil_unrest_7 duration = -1 }
		}
		if = {
			limit = { has_province_modifier = civil_unrest_9 }
			remove_province_modifier = civil_unrest_9
			add_province_modifier = { name = civil_unrest_8 duration = -1 }
		}
	}
}

# Public support swayed toward emperor in crisis
province_event = {
	id = laws.210
	desc = "EVTDESCLAWS210"
	
	trigger = {
		any_province_lord = {
			has_character_modifier = constitutional_crisis
			has_character_flag = flag_crisis_emperor
		}
		ROOT = { NOT = { has_province_modifier = public_for_emperor } }
	}
	
	mean_time_to_happen = {
		days = 60
		
		# Inertia
		modifier = {
			factor = 10
			has_province_modifier = public_against_emperor
		}
		
		# Recent successful speeches
		modifier = {
			factor = 5
			has_province_modifier = recent_speech_against_emperor
		}
		modifier = {
			factor = 0.2
			has_province_modifier = recent_speech_for_emperor
		}
		
		# Specific issues vs province ideology
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		
		# Neighbors
		modifier = {
			factor = 0.5
			any_neighbor_province = { has_province_modifier = public_for_emperor }
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_emperor
				count = 2
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_emperor
				count = 3
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_emperor
				count = 4
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_emperor
				count = 5
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = { has_province_modifier = public_against_emperor }
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_emperor
				count = 2
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_emperor
				count = 3
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_emperor
				count = 4
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_emperor
				count = 5
			}
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { NOT = { has_province_modifier = public_against_emperor } }
			add_province_modifier = { name = public_for_emperor duration = -1 }
		}
		if = {
			limit = { has_province_modifier = public_against_emperor }
			remove_province_modifier = public_against_emperor
		}
	}
}
# Public support swayed against emperor in crisis
province_event = {
	id = laws.211
	desc = "EVTDESCLAWS211"
	
	trigger = {
		any_province_lord = {
			has_character_modifier = constitutional_crisis
			has_character_flag = flag_crisis_emperor
		}
		ROOT = { NOT = { has_province_modifier = public_against_emperor } }
	}
	
	mean_time_to_happen = {
		days = 60
		
		# Inertia
		modifier = {
			factor = 10
			has_province_modifier = public_for_emperor
		}
		
		# Recent successful speeches
		modifier = {
			factor = 5
			has_province_modifier = recent_speech_for_emperor
		}
		modifier = {
			factor = 0.2
			has_province_modifier = recent_speech_against_emperor
		}
		
		# Specific issues vs province ideology
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_emperor
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		
		# Neighbors
		modifier = {
			factor = 2
			any_neighbor_province = { has_province_modifier = public_for_emperor }
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_emperor
				count = 2
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_emperor
				count = 3
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_emperor
				count = 4
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_emperor
				count = 5
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = { has_province_modifier = public_against_emperor }
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_emperor
				count = 2
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_emperor
				count = 3
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_emperor
				count = 4
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_emperor
				count = 5
			}
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { NOT = { has_province_modifier = public_for_emperor } }
			add_province_modifier = { name = public_against_emperor duration = -1 }
		}
		if = {
			limit = { has_province_modifier = public_for_emperor }
			remove_province_modifier = public_for_emperor
		}
	}
}

# Public support swayed toward king in crisis
province_event = {
	id = laws.220
	desc = "EVTDESCLAWS220"
	
	trigger = {
		any_province_lord = {
			has_character_modifier = constitutional_crisis
			has_character_flag = flag_crisis_king
		}
		ROOT = { NOT = { has_province_modifier = public_for_king } }
	}
	
	mean_time_to_happen = {
		days = 60
		
		# Inertia
		modifier = {
			factor = 10
			has_province_modifier = public_against_king
		}
		
		# Recent successful speeches
		modifier = {
			factor = 5
			has_province_modifier = recent_speech_against_king
		}
		modifier = {
			factor = 0.2
			has_province_modifier = recent_speech_for_king
		}
		
		# Specific issues vs province ideology
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		
		# Neighbors
		modifier = {
			factor = 0.5
			any_neighbor_province = { has_province_modifier = public_for_king }
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_king
				count = 2
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_king
				count = 3
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_king
				count = 4
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_king
				count = 5
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = { has_province_modifier = public_against_king }
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_king
				count = 2
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_king
				count = 3
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_king
				count = 4
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_king
				count = 5
			}
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { NOT = { has_province_modifier = public_against_king } }
			add_province_modifier = { name = public_for_king duration = -1 }
		}
		if = {
			limit = { has_province_modifier = public_against_king }
			remove_province_modifier = public_against_king
		}
	}
}
# Public support swayed against king in crisis
province_event = {
	id = laws.221
	desc = "EVTDESCLAWS221"
	
	trigger = {
		any_province_lord = {
			has_character_modifier = constitutional_crisis
			has_character_flag = flag_crisis_king
		}
		ROOT = { NOT = { has_province_modifier = public_against_king } }
	}
	
	mean_time_to_happen = {
		days = 60
		
		# Inertia
		modifier = {
			factor = 10
			has_province_modifier = public_for_king
		}
		
		# Recent successful speeches
		modifier = {
			factor = 5
			has_province_modifier = recent_speech_for_king
		}
		modifier = {
			factor = 0.2
			has_province_modifier = recent_speech_against_king
		}
		
		# Specific issues vs province ideology
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_king
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		
		# Neighbors
		modifier = {
			factor = 2
			any_neighbor_province = { has_province_modifier = public_for_king }
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_king
				count = 2
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_king
				count = 3
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_king
				count = 4
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_king
				count = 5
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = { has_province_modifier = public_against_king }
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_king
				count = 2
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_king
				count = 3
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_king
				count = 4
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_king
				count = 5
			}
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { NOT = { has_province_modifier = public_for_king } }
			add_province_modifier = { name = public_against_king duration = -1 }
		}
		if = {
			limit = { has_province_modifier = public_for_king }
			remove_province_modifier = public_for_king
		}
	}
}

# Public support swayed toward duke in crisis
province_event = {
	id = laws.230
	desc = "EVTDESCLAWS230"
	
	trigger = {
		any_province_lord = {
			has_character_modifier = constitutional_crisis
			has_character_flag = flag_crisis_duke
		}
		ROOT = { NOT = { has_province_modifier = public_for_duke } }
	}
	
	mean_time_to_happen = {
		days = 60
		
		# Inertia
		modifier = {
			factor = 10
			has_province_modifier = public_against_duke
		}
		
		# Recent successful speeches
		modifier = {
			factor = 5
			has_province_modifier = recent_speech_against_duke
		}
		modifier = {
			factor = 0.2
			has_province_modifier = recent_speech_for_duke
		}
		
		# Specific issues vs province ideology
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		
		# Neighbors
		modifier = {
			factor = 0.5
			any_neighbor_province = { has_province_modifier = public_for_duke }
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_duke
				count = 2
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_duke
				count = 3
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_duke
				count = 4
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_for_duke
				count = 5
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = { has_province_modifier = public_against_duke }
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_duke
				count = 2
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_duke
				count = 3
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_duke
				count = 4
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_against_duke
				count = 5
			}
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { NOT = { has_province_modifier = public_against_duke } }
			add_province_modifier = { name = public_for_duke duration = -1 }
		}
		if = {
			limit = { has_province_modifier = public_against_duke }
			remove_province_modifier = public_against_duke
		}
	}
}
# Public support swayed against duke in crisis
province_event = {
	id = laws.231
	desc = "EVTDESCLAWS231"
	
	trigger = {
		any_province_lord = {
			has_character_modifier = constitutional_crisis
			has_character_flag = flag_crisis_duke
		}
		ROOT = { NOT = { has_province_modifier = public_against_duke } }
	}
	
	mean_time_to_happen = {
		days = 60
		
		# Inertia
		modifier = {
			factor = 10
			has_province_modifier = public_for_duke
		}
		
		# Recent successful speeches
		modifier = {
			factor = 5
			has_province_modifier = recent_speech_for_duke
		}
		modifier = {
			factor = 0.2
			has_province_modifier = recent_speech_against_duke
		}
		
		# Specific issues vs province ideology
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.25
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.5
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 0.5
			any_province_lord = {
				has_character_flag = flag_crisis_duke
				has_character_flag = flag_term_limit_defied
			}
			religion_authority = 0.75
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		
		# Neighbors
		modifier = {
			factor = 2
			any_neighbor_province = { has_province_modifier = public_for_duke }
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_duke
				count = 2
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_duke
				count = 3
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_duke
				count = 4
			}
		}
		modifier = {
			factor = 2
			any_neighbor_province = {
				has_province_modifier = public_for_duke
				count = 5
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = { has_province_modifier = public_against_duke }
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_duke
				count = 2
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_duke
				count = 3
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_duke
				count = 4
			}
		}
		modifier = {
			factor = 0.5
			any_neighbor_province = {
				has_province_modifier = public_against_duke
				count = 5
			}
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { NOT = { has_province_modifier = public_for_duke } }
			add_province_modifier = { name = public_against_duke duration = -1 }
		}
		if = {
			limit = { has_province_modifier = public_for_duke }
			remove_province_modifier = public_for_duke
		}
	}
}

# Public support swayed toward count in crisis
province_event = {
	id = laws.240
	desc = "EVTDESCLAWS240"
	
	trigger = {
		owner = {
			has_character_modifier = constitutional_crisis
			has_character_flag = flag_crisis_count
		}
		ROOT = { NOT = { has_province_modifier = public_for_count } }
	}
	
	mean_time_to_happen = {
		days = 60
		
		# Inertia
		modifier = {
			factor = 10
			has_province_modifier = public_against_count
		}
		
		# Recent successful speeches
		modifier = {
			factor = 5
			has_province_modifier = recent_speech_against_count
		}
		modifier = {
			factor = 0.2
			has_province_modifier = recent_speech_for_count
		}
		
		# Specific issues vs province ideology
		modifier = {
			factor = 0.5
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.25
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.5
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.75
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.25
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 2
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.5
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 2
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.75
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { NOT = { has_province_modifier = public_against_count } }
			add_province_modifier = { name = public_for_count duration = -1 }
		}
		if = {
			limit = { has_province_modifier = public_against_count }
			remove_province_modifier = public_against_count
		}
	}
}
# Public support swayed against count in crisis
province_event = {
	id = laws.241
	desc = "EVTDESCLAWS241"
	
	trigger = {
		any_province_lord = {
			has_character_modifier = constitutional_crisis
			has_character_flag = flag_crisis_count
		}
		ROOT = { NOT = { has_province_modifier = public_against_count } }
	}
	
	mean_time_to_happen = {
		days = 60
		
		# Inertia
		modifier = {
			factor = 10
			has_province_modifier = public_for_count
		}
		
		# Recent successful speeches
		modifier = {
			factor = 5
			has_province_modifier = recent_speech_for_count
		}
		modifier = {
			factor = 0.2
			has_province_modifier = recent_speech_against_count
		}
		
		# Specific issues vs province ideology
		modifier = {
			factor = 2
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.25
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.5
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 2
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.75
			OR = {
				religion = terran_imperial
				religion = neo_feudal
				religion = astrist
			}
		}
		modifier = {
			factor = 0.5
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.25
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 0.5
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.5
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
		modifier = {
			factor = 0.5
			owner = { has_character_flag = flag_term_limit_defied }
			religion_authority = 0.75
			OR = {
				religion = terran_republican
				religion = terran_federalist
				religion = colonial_seperatist
			}
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { NOT = { has_province_modifier = public_for_count } }
			add_province_modifier = { name = public_against_count duration = -1 }
		}
		if = {
			limit = { has_province_modifier = public_for_count }
			remove_province_modifier = public_for_count
		}
	}
}

# Pro-ruler vassal makes pro-ruler speech
character_event = {
	id = laws.250
	desc = "EVTDESCLAWS250"
	picture = GFX_evt_speech
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		custom_tooltip = {
			text = "EVTTOOLTIPGIVESPEECH"
			hidden_tooltip = { e_rebels = { holder_scope = { character_event = { id = laws.251 } } } } # Resolve speech
		}
	}
	
	option = {
		name = "EVTOPTNEVERMIND"
		clr_character_flag = flag_making_crisis_decision
		ai_chance = { factor = 0 }
	}
}

# Judge effectiveness of speech
character_event = {
	id = laws.251
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		# Successful pro-ruler speech
		FROM = { character_event = { id = laws.252 } } # Inform speechgiver speech was successful
		# Increment opinion of ruler by one
		if = {
			limit = { FROM = { has_character_flag = flag_cached_crisis_emperor } }
			FROM = { location = { province_event = { id = laws.210 } } }
		}
		if = {
			limit = { FROM = { has_character_flag = flag_cached_crisis_king } }
			FROM = { location = { province_event = { id = laws.220 } } }
		}
		if = {
			limit = { FROM = { has_character_flag = flag_cached_crisis_duke } }
			FROM = { location = { province_event = { id = laws.230 } } }
		}
		if = {
			limit = { FROM = { has_character_flag = flag_cached_crisis_count } }
			FROM = { location = { province_event = { id = laws.240 } } }
		}
		
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 2 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 4 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 6 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 8 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 10 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 12 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 14 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 16 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 18 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 20 }
			}
			
			modifier = {
				factor = 0.25
				FROM = { location = { NOT = { religion = PREV } } }
			}
			modifier = {
				factor = 0.5
				FROM = {
					location = { religion = PREV }
					NOT = { religion_authority = 0.25 }
				}
			}
			modifier = {
				factor = 2
				FROM = {
					location = { religion = PREV }
					religion_authority = 0.75
				}
			}
			
			modifier = {
				factor = 2
				FROM = { liege = { has_character_modifier = law_for_ruler } }
			}
			modifier = {
				factor = 0.5
				FROM = { liege = { has_character_modifier = law_against_ruler } }
			}
		}
	}
	
	option = {
		# Failed pro-ruler speech
		FROM = { character_event = { id = laws.253 } } # Inform speechgiver that speech failed
	}
}

character_event = {
	id = laws.252
	desc = "EVTDESCLAWS252"
	picture = GFX_evt_speech
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		prestige = 50
		clr_character_flag = flag_making_crisis_decision
		# Add appropriate successful speech modifier
		if = {
			limit = { has_character_flag = flag_cached_crisis_emperor }
			location = { add_province_modifier = { name = recent_speech_for_emperor duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_king }
			location = { add_province_modifier = { name = recent_speech_for_king duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_duke }
			location = { add_province_modifier = { name = recent_speech_for_duke duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_count }
			location = { add_province_modifier = { name = recent_speech_for_count duration = 50 } }
		}
	}
}
character_event = {
	id = laws.253
	desc = "EVTDESCLAWS253"
	picture = GFX_evt_speech
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		prestige = -50
		clr_character_flag = flag_making_crisis_decision
		# Add appropriate failed speech modifier
		if = {
			limit = { has_character_flag = flag_cached_crisis_emperor }
			location = { add_province_modifier = { name = recent_failed_pro_emperor_speech duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_king }
			location = { add_province_modifier = { name = recent_failed_pro_king_speech duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_duke }
			location = { add_province_modifier = { name = recent_failed_pro_duke_speech duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_count }
			location = { add_province_modifier = { name = recent_failed_pro_count_speech duration = 50 } }
		}
	}
}

# Anti-ruler vassal makes anti-ruler speech
character_event = {
	id = laws.260
	desc = "EVTDESCLAWS260"
	picture = GFX_evt_speech
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		custom_tooltip = {
			text = "EVTTOOLTIPGIVESPEECH"
			hidden_tooltip = { e_rebels = { holder_scope = { character_event = { id = laws.261 } } } } # Resolve speech
		}
	}
	
	option = {
		name = "EVTOPTNEVERMIND"
		clr_character_flag = flag_making_crisis_decision
		ai_chance = { factor = 0 }
	}
}

# Judge effectiveness of speech
character_event = {
	id = laws.261
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		# Successful anti-ruler speech
		FROM = { character_event = { id = laws.262 } } # Inform speechgiver speech was successful
		# Increment opinion of ruler by one
		if = {
			limit = { FROM = { has_character_flag = flag_cached_crisis_emperor } }
			FROM = { location = { province_event = { id = laws.211 } } }
		}
		if = {
			limit = { FROM = { has_character_flag = flag_cached_crisis_king } }
			FROM = { location = { province_event = { id = laws.221 } } }
		}
		if = {
			limit = { FROM = { has_character_flag = flag_cached_crisis_duke } }
			FROM = { location = { province_event = { id = laws.231 } } }
		}
		if = {
			limit = { FROM = { has_character_flag = flag_cached_crisis_count } }
			FROM = { location = { province_event = { id = laws.241 } } }
		}
		
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 2 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 4 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 6 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 8 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 10 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 12 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 14 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 16 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 18 }
			}
			modifier = {
				factor = 1.25
				FROM = { diplomacy = 20 }
			}
			
			modifier = {
				factor = 0.25
				FROM = { location = { NOT = { religion = PREV } } }
			}
			modifier = {
				factor = 0.5
				FROM = {
					location = { religion = PREV }
					NOT = { religion_authority = 0.25 }
				}
			}
			modifier = {
				factor = 2
				FROM = {
					location = { religion = PREV }
					religion_authority = 0.75
				}
			}
			
			modifier = {
				factor = 0.5
				FROM = { liege = { has_character_modifier = law_for_ruler } }
			}
			modifier = {
				factor = 2
				FROM = { liege = { has_character_modifier = law_against_ruler } }
			}
		}
	}
	
	option = {
		# Failed anti-ruler speech
		FROM = { character_event = { id = laws.263 } } # Inform speechgiver that speech failed
	}
}

character_event = {
	id = laws.262
	desc = "EVTDESCLAWS262"
	picture = GFX_evt_speech
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		prestige = 50
		clr_character_flag = flag_making_crisis_decision
		# Add appropriate successful speech modifier
		if = {
			limit = { has_character_flag = flag_cached_crisis_emperor }
			location = { add_province_modifier = { name = recent_speech_against_emperor duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_king }
			location = { add_province_modifier = { name = recent_speech_against_king duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_duke }
			location = { add_province_modifier = { name = recent_speech_against_duke duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_count }
			location = { add_province_modifier = { name = recent_speech_against_count duration = 50 } }
		}
	}
}
character_event = {
	id = laws.263
	desc = "EVTDESC263"
	picture = GFX_evt_speech
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		prestige = -50
		clr_character_flag = flag_making_crisis_decision
		# Add appropriate failed speech modifier
		if = {
			limit = { has_character_flag = flag_cached_crisis_emperor }
			location = { add_province_modifier = { name = recent_failed_anti_emperor_speech duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_king }
			location = { add_province_modifier = { name = recent_failed_anti_king_speech duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_duke }
			location = { add_province_modifier = { name = recent_failed_anti_duke_speech duration = 50 } }
		}
		if = {
			limit = { has_character_flag = flag_cached_crisis_count }
			location = { add_province_modifier = { name = recent_failed_anti_count_speech duration = 50 } }
		}
	}
}

# Character offers support to liege in a constitutional crisis
character_event = {
	# Character considers whether to ask for/offer to repay favor
	id = laws.300
	desc = "EVTDESCLAWS300"
	is_triggered_only = yes
	
	option = {
		# Side with liege with no reservations
		name = "EVTOPTCONFIRM"
		character_event = { id = laws.404 tooltip = "EVTTOOLTIPLAWS404" }
		clr_character_flag = flag_making_crisis_decision
		ai_chance = {
			factor = 100
			# Opinion of Liege Factor
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -99 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -89 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -79 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -69 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -59 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -49 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -39 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -29 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -19 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = liege value = -9 } }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 10 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 20 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 30 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 40 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 50 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 60 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 70 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 80 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 90 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = liege value = 100 }
			}
			
			# Personality Effects
			modifier = {
				factor = 0.1
				trait = ambitious
			}
			modifier = {
				factor = 10
				trait = content
			}
			modifier = {
				factor = 0.5
				trait = pragmatic
			}
			
			# Legal Effects
			modifier = {
				factor = 2
				liege = { has_character_modifier = crisis_law_for_ruler }
				NOT = { trait = pragmatic }
			}
			modifier = {
				factor = 2
				liege = { has_character_modifier = crisis_law_for_ruler }
				trait = radical
			}
			modifier = {
				factor = 0.5
				liege = { has_character_modifier = crisis_law_against_ruler }
				NOT = { trait = pragmatic }
			}
			modifier = {
				factor = 0.5
				liege = { has_character_modifier = crisis_law_against_ruler }
				trait = radical
			}
			
			# Holds a key position of power, more likely to get a favor if they ask for it
			modifier = {
				factor = 0.8
				relative_power_to_liege = 0.1
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.8
				relative_power_to_liege = 0.2
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.8
				relative_power_to_liege = 0.3
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.8
				relative_power_to_liege = 0.4
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.8
				relative_power_to_liege = 0.5
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.8
				relative_power_to_liege = 0.6
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.8
				relative_power_to_liege = 0.7
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.8
				relative_power_to_liege = 0.8
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.8
				relative_power_to_liege = 0.9
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.5
				has_job_title = job_marshal
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.5
				has_job_title = job_treasurer
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.5
				has_job_title = job_spymaster
				OR = {
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.5
				has_job_title = job_spiritual
				liege = {
					NOT = { has_character_modifier = crisis_law_for_ruler }
					NOT = { has_character_modifier = crisis_law_against_ruler }
				}
				NOT = { religion_authority = 0.25 }
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.5
				has_job_title = job_spiritual
				liege = {
					NOT = { has_character_modifier = crisis_law_for_ruler }
					NOT = { has_character_modifier = crisis_law_against_ruler }
				}
				NOT = { religion_authority = 0.5 }
				NOT = { trait = radical }
				NOT = { trait = content }
			}
			modifier = {
				factor = 0.5
				has_job_title = job_spiritual
				liege = {
					NOT = { has_character_modifier = crisis_law_for_ruler }
					NOT = { has_character_modifier = crisis_law_against_ruler }
				}
				OR = {
					NOT = { religion_authority = 0.75 }
					trait = pragmatic
				}
				NOT = { trait = content }
			}
		}
	}
	option = {
		trigger = {
			NOT = { has_opinion_modifier = { who = liege modifier = opinion_owes_me_a_favor } }
			NOT = { reverse_has_opinion_modifier = { who = liege modifier = opinion_owes_me_a_favor } }
		}
		name = "EVTOPTOFFERAFAVOR"
		liege = { letter_event = { id = laws.301 tooltip = "EVTTOOLTIPLAWS301" } } # Offer a favor in exchange for taking liege's side
		ai_chance = {
			factor = 10
			# Character wants something
			modifier = {
				factor = 2
				OR = {
					trait = ambitious
					# List of ambitions that could use a favor from liege
					any_demesne_title = {
						has_law = succ_appointment
						NOT = {
							ROOT = {
								any_dynasty_member = {
									liege = { character = ROOT }
									has_minor_title = title_expected_successor
								}
							}
						}
					}
				}
			}
			modifier = {
				factor = 5
				NOT = { trait = radical }
				OR = {
					trait = ambitious
					# List of ambitions that could use a favor from liege
					any_demesne_title = {
						has_law = succ_appointment
						NOT = {
							ROOT = {
								any_dynasty_member = {
									liege = { character = ROOT }
									has_minor_title = title_expected_successor
								}
							}
						}
					}
				}
			}
			modifier = {
				factor = 2
				trait = pragmatic
				OR = {
					trait = ambitious
					# List of ambitions that could use a favor from liege
					any_demesne_title = {
						has_law = succ_appointment
						NOT = {
							ROOT = {
								any_dynasty_member = {
									liege = { character = ROOT }
									has_minor_title = title_expected_successor
								}
							}
						}
					}
				}
			}
			# Avoid spamming favor offer requests
			modifier = {
				factor = 0
				has_opinion_modifier = { who = liege modifier = opinion_recently_rejected_favor_offer_0 }
			}
			modifier = {
				factor = 0.5
				has_opinion_modifier = { who = liege modifier = opinion_recently_rejected_favor_offer_1 }
			}
			modifier = {
				factor = 0.5
				has_opinion_modifier = { who = liege modifier = opinion_recently_rejected_favor_offer_2 }
			}
		}
	}
	option = {
		# Offer to repay an owed favor
		trigger = { reverse_has_opinion_modifier = { who = liege modifier = opinion_owes_me_a_favor } }
		name = "EVTOPTREPAYFAVOR"
		liege = { letter_event = { id = laws.304 tooltip = "EVTTOOLTIPLAWS304" } }
		ai_chance = {
			factor = 100
			# Avoid spamming favor repayment requests
			modifier = {
				factor = 0
				has_opinion_modifier = { who = liege modifier = opinion_recently_denied_favor_repayment_0 }
			}
			modifier = {
				factor = 0.5
				has_opinion_modifier = { who = liege modifier = opinion_recently_denied_favor_repayment_1 }
			}
			modifier = {
				factor = 0.5
				has_opinion_modifier = { who = liege modifier = opinion_recently_denied_favor_repayment_2 }
			}
		}
	}
	option = {
		name = "EVTOPTNEVERMIND"
		ai_chance = { factor = 0 }
	}
}

# Vassal offers to support liege in exchange for future favor - inform liege
letter_event = {
	id = laws.301
	desc = "EVTDESCLAWS301"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTACCEPT"
		FROM = {
			letter_event = { id = laws.302 tooltip = "EVTTOOLTIPLAWS302" } # Inform vassal that the offer was accepted
			custom_tooltip = {
				text = "EVTTOOLTIPWILLBEOWEDAFAVOR"
				hidden_tooltip = {
					opinion = { who = ROOT modifier = opinion_owes_me_a_favor }
					opinion = { who = ROOT modifier = opinion_favor_type_political }
					opinion = { who = ROOT modifier = opinion_favor_ongoing_crisis_support }
				}
			}
		}
		if = {
			limit = {
				FROM = {
					has_character_flag = flag_defaulted_favor
					NOT = { had_character_flag = { flag = flag_defaulted_favor days = 2620 } }
				}
				custom_tooltip = { text = "UNTRUSTWORTHYREPUTATION" }
			}
		}
		ai_chance = {
			factor = 10
			# Personality
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = content
			}
			# Value of favor-asker to liege's faction
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.1 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.2 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.3 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.4 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.5 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.6 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.7 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.8 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.9 }
			}
			modifier = {
				factor = 4
				FROM = { has_job_title = job_marshal }
			}
			modifier = {
				factor = 4
				FROM = { has_job_title = job_treasurer }
			}
			modifier = {
				factor = 4
				FROM = { has_job_title = job_spymaster }
			}
			modifier = {
				factor = 5
				FROM = { has_job_title = job_spiritual }
				NOT = { has_character_modifier = crisis_law_for_ruler }
				NOT = { has_character_modifier = crisis_law_against_ruler }
			}
			# Favor-asker's "credit rating"
			modifier = {
				factor = 0
				FROM = {
					has_character_flag = flag_defaulted_favor
					NOT = { had_character_flag = { flag = flag_defaulted_favor days = 365 } }
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					has_character_flag = flag_defaulted_favor
					NOT = { had_character_flag = { flag = flag_defaulted_favor days = 730 } }
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					has_character_flag = flag_defaulted_favor
					NOT = { had_character_flag = { flag = flag_defaulted_favor days = 1460 } }
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					has_character_flag = flag_defaulted_favor
					NOT = { had_character_flag = { flag = flag_defaulted_favor days = 2920 } }
				}
			}
		}
	}
	
	option = {
		name = "EVTOPTREFUSE"
		hidden_tooltip = { FROM = { letter_event = { id = laws.303 } } } # Inform vassal that offer was rejected
		FROM = {
			opinion = { who = ROOT modifier = opinion_recently_rejected_favor_offer_0 }
			opinion = { who = ROOT modifier = opinion_recently_rejected_favor_offer_1 }
			opinion = { who = ROOT modifier = opinion_recently_rejected_favor_offer_2 }
		}
		ai_chance = { factor = 100 }
	}
}

# Ruler accepts offer of future favor - inform vassal
letter_event = {
	id = laws.302
	desc = "EVTDESCLAWS302"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		character_event = { id = laws.404 tooltip = "EVTTOOLTIPLAWS404" }
		clr_character_flag = flag_making_crisis_decision
		hidden_tooltip = {
			any_realm_character = {
				limit = { same_liege = ROOT }
				character_event = { laws.407 } # Inform fellow vassals
			}
		}
	}
}

# Ruler rejects offer of future favor - inform vassal
letter_event = {
	id = laws.303
	desc = "EVTDESCLAWS303"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		clr_character_flag = flag_making_crisis_decision
	}
}


# Vassal offers to repay favor by supporting liege - inform liege
letter_event = {
	id = laws.304
	desc = "EVTDESCLAWS304"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTAACCEPT"
		FROM = {
			letter_event = { id = laws.305 tooltip = "EVTTOOLTIPLAWS305" } # Inform vassal that the offer was accepted
			custom_tooltip = {
				text = "EVTTOOLTIPFULFILLSFAVOR"
				hidden_tooltip = {
					remove_opinion = { who = ROOT modifier = opinion_owes_me_a_favor }
					opinion = { who = ROOT modifier = opinion_favor_ongoing_crisis_support }
				}
			}
		}
		ai_chance = {
			factor = 25
			# Personality
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = content
			}
			# Value of favor-asker to liege's faction
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.1 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.2 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.3 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.4 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.5 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.6 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.7 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.8 }
			}
			modifier = {
				factor = 2
				FROM = { relative_power_to_liege = 0.9 }
			}
			modifier = {
				factor = 4
				FROM = { has_job_title = job_marshal }
			}
			modifier = {
				factor = 4
				FROM = { has_job_title = job_treasurer }
			}
			modifier = {
				factor = 4
				FROM = { has_job_title = job_spymaster }
			}
			modifier = {
				factor = 5
				FROM = { has_job_title = job_spiritual }
				NOT = { has_character_modifier = crisis_law_for_ruler }
				NOT = { has_character_modifier = crisis_law_against_ruler }
			}
		}
	}
	
	option = {
		name = "EVTOPTREJECTED"
		hidden_tooltip = { FROM = { letter_event = { id = laws.306 } } } # Inform vassal that offer was rejected
		FROM = {
			opinion = { who = ROOT modifier = opinion_recently_denied_favor_repayment_0 }
			opinion = { who = ROOT modifier = opinion_recently_denied_favor_repayment_1 }
			opinion = { who = ROOT modifier = opinion_recently_denied_favor_repayment_2 }
		}
		ai_chance = { factor = 100 }
	}
}

# Ruler accepts offer of favor repayment - inform vassal
letter_event = {
	id = laws.305
	desc = "EVTDESCLAWS305"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		character_event = { id = laws.404 tooltip = "EVTTOOLTIPLAWS404" }
		FROM = {
			custom_tooltip = {
				text = "FAVORFULFILLED"
				hidden_tooltip = {
					remove_opinion = { who = ROOT modifier = opinion_owes_me_a_favor }
					opinion = { who = ROOT modifier = opinion_favor_ongoing_appointment }
					letter_event = { id = favor.100 }
				}
			}
		}
		clr_character_flag = flag_making_crisis_decision
	}
}

# Ruler rejects offer of favor repayment - inform vassal
letter_event = {
	id = laws.306
	desc = "EVTDESCLAWS306"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		clr_character_flag = flag_making_crisis_decision
	}
}

# Decide to side against ruler
character_event = {
	id = laws.310
	desc = "EVTDESCLAWS310"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		character_event = { id = laws.407 tooltip = "EVTTOOLTIPLAWS407" }
		clr_character_flag = flag_making_crisis_decision
	}
	
	option = {
		name = "EVTOPTNEVERMIND"
		clr_character_flag = flag_making_crisis_decision
		ai_chance = { factor = 0 }
	}
}

# Pro-ruler vassal decides to back down
character_event = {
	id = laws.320
	desc = "EVTDESCLAWS320"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		character_event = { id = laws.410 tooltip = "EVTTOOLTIPLAWS410" }
		if = {
			limit = { liege = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_crisis_support } } }
			liege = { character_event = { id = favor.200 tooltip = "EVTTOOLTIPFAVOR200" } }
		}
		clr_character_flag = flag_making_crisis_decision
	}
	option = {
		name = "EVTOPTNEVERMIND"
		clr_character_flag = flag_making_crisis_decision
		ai_chance = { factor = 0 }
	}
}

# Anti-ruler vassal decides to back down
character_event = {
	id = laws.321
	desc = "EVTDESCLAWS321"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		character_event = { id = laws.413 tooltip = "EVTTOOLTIPLAWS413" }
		clr_character_flag = flag_making_crisis_decision
	}
	option = {
		name = "EVTOPTNEVERMIND"
		clr_character_flag = flag_making_crisis_decision
		ai_chance = { factor = 0 }
	}
}

# Assorted generic informing posts
# Ruler's liege declares support for leader
# Inform ruler
character_event = {
	id = laws.400
	desc = "EVTDESCLAWS400"
	picture = GFX_evt_news
	is_triggered_only = yes
	
	trigger = { has_character_modifier = constitutional_crisis }
	
	immediate = {
		any_realm_character = {
			limit = { liege = { character = ROOT } }
			character_event = { id = laws.401 } # Inform vassals
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { has_character_modifier = crisis_liege_against_ruler }
			remove_character_modifier = crisis_liege_against_ruler
		}
		add_character_modifier = { name = crisis_liege_for_ruler duration = -1 }
	}
}
# Inform ruler's vassals
character_event = {
	id = laws.401
	desc = "EVTDESCLAWS401"
	is_triggered_only = yes
	show_from_from = yes
	
	option = {
		trigger = { trait = pro_ruler }
		name = "EVTOPTALAWS401"
		opinion = { who = FROMFROM modifier = opinion_supported_my_faction }
		clr_character_flag = flag_cached_liege_against_ruler
		set_character_flag = flag_cached_liege_for_ruler
	}
	
	option = {
		trigger = { trait = anti_ruler }
		name = "EVTOPTBLAWS401"
		opinion = { who = FROMFROM modifier = opinion_opposed_my_faction }
		clr_character_flag = flag_cached_liege_against_ruler
		set_character_flag = flag_cached_liege_for_ruler
		if = {
			limit = { ai = yes }
			character_event = { id = laws.500 }
		}
	}
	
	option = {
		trigger = {
			NOT = { trait = pro_ruler }
			NOT = { trait = anti_ruler }
		}
		if = {
			limit = { ai = yes }
			character_event = { id = laws.500 }
		}
		name = "EVTOPTCLAWS401"
	}
}
# Ruler's liege announces public opposition to ruler - Inform ruler
character_event = {
	id = laws.402
	desc = "EVTDESCLAWS402"
	is_triggered_only = yes
	
	trigger = { has_character_modifier = constitutional_crisis }
	
	immediate = {
		any_realm_character = {
			limit = { liege = { character = ROOT } }
			character_event = { id = laws.403 } # Inform vassals
		}
	}
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { has_character_modifier = crisis_liege_for_ruler }
			remove_character_modifier = crisis_liege_for_ruler
		}
		add_character_modifier = { name = crisis_liege_against_ruler duration = -1 }
	}
}
# Inform ruler's vassals
character_event = {
	id = laws.403
	desc = "EVTDESCLAWS403"
	is_triggered_only = yes
	show_from_from = yes
	
	option = {
		trigger = { trait = pro_ruler }
		name = "EVTOPTALAWS403"
		opinion = { who = FROMFROM modifier = opinion_opposed_my_faction }
		clr_character_flag = flag_cached_liege_for_ruler
		set_character_flag = flag_cached_liege_against_ruler
		if = {
			limit = { ai = yes }
			character_event = { id = laws.500 }
		}
	}
	
	option = {
		trigger = { trait = anti_ruler }
		name = "EVTOPTBLAWS403"
		opinion = { who = FROMFROM modifier = opinion_supported_my_faction }
		clr_character_flag = flag_cached_liege_for_ruler
		set_character_flag = flag_cached_liege_against_ruler
	}
	
	option = {
		trigger = {
			NOT = { trait = pro_ruler }
			NOT = { trait = anti_ruler }
		}
		if = {
			limit = { ai = yes }
			character_event = { id = laws.500 }
		}
		name = "EVTOPTCONFIRM"
	}
}
# A vassal declares their support for the ruler
# Inform declaring vassal
character_event = {
	id = laws.404
	desc = "EVTDESCLAWS404"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { trait = anti_ruler }
			remove_trait = anti_ruler
		}
		add_trait = pro_ruler
		
		hidden_tooltip = {
			character_event = { id = laws.8 } # Cache crisis flags from liege
			liege = { character_event = { id = laws.405 } } # Inform liege
			any_realm_character = {
				limit = {
					NOT = { character = ROOT }
					same_liege = ROOT
				}
				character_event = { id = laws.406 } # Inform fellow vassals
			}
		}
	}
}
# Inform Ruler
character_event = {
	id = laws.405
	desc = "EVTDESCLAWS405"
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		name = "EVTOPTCONFIRM"
		opinion = { who = FROM modifier = opinion_supported_my_faction }
	}
}
# Inform ruler's vassals
character_event = {
	id = laws.406
	desc = "EVTDESCLAWS406"
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		if = {
			limit = { trait = anti_ruler }
			opinion = { who = FROM modifier = opinion_opposed_my_faction }
		}
		if = {
			limit = { trait = pro_ruler }
			opinion = { who = FROM modifier = opinion_supported_my_faction }
		}
		if = {
			limit = {
				ai = yes
				NOT = { trait = pro_ruler }
				FROM = {
					OR = {
						relative_power_to_liege = 0.25
						is_councillor = yes
					}
				}
			}
			character_event = { id = laws.500 }
		}
	}
}
# A vassal declares their opposition to the ruler
# Inform declaring vassal
character_event = {
	id = laws.407
	desc = "EVTDESCLAWS407"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		if = {
			limit = { trait = pro_ruler }
			remove_trait = pro_ruler
		}
		add_trait = anti_ruler
		
		hidden_tooltip = {
			character_event = { id = laws.8 } # Cache crisis flags from liege
			liege = { character_event = { id = laws.408 } } # Inform liege
			any_realm_character = {
				limit = {
					NOT = { character = ROOT }
					same_liege = ROOT
				}
				character_event = { id = laws.409 } # Inform fellow vassals
			}
		}
	}
}
# Inform Ruler
character_event = {
	id = laws.408
	desc = "EVTDESCLAWS408"
	is_triggered_only = yes
	notification = yes
	
	immediate = { opinion = { who = FROM modifier = opinion_opposed_my_faction } }
}
# Inform ruler's vassals
character_event = {
	id = laws.409
	desc = "EVTDESCLAWS409"
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		if = {
			limit = { trait = pro_ruler }
			opinion = { who = FROM modifier = opinion_opposed_my_faction }
		}
		if = {
			limit = { trait = anti_ruler }
			opinion = { who = FROM modifier = opinion_supported_my_faction }
		}
		if = {
			limit = {
				ai = yes
				NOT = { trait = anti_ruler }
				FROM = {
					OR = {
						relative_power_to_liege = 0.25
						is_councillor = yes
					}
				}
			}
			character_event = { id = laws.500 }
		}
	}
}
# A previously ruler-supporting vassal withdraws their support
# Inform support-withdrawing vassal
character_event = {
	id = laws.410
	desc = "EVTDESCLAWS410"
	is_triggered_only = yes
	
	trigger = { trait = pro_ruler }
	
	option = {
		name = "EVTOPTALAWS410"
		remove_trait = pro_ruler
		if = {
			limit = { liege = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_crisis_support } } }
			liege = { character_event = { id = favor.200 tooltip = "EVTTOOLTIPFAVOR200" } } # Favor failed
		}
		hidden_tooltip = {
			character_event = { id = laws.5 } # Clean up cache flags
			liege = { character_event = { id = laws.411 } } # Inform ruler
			any_realm_character = {
				limit = {
					NOT = { character = ROOT }
					same_liege = ROOT
				}
				character_event = { id = laws.412 } # Inform fellow vassals
			}
		}
	}
}
# Inform ruler
character_event = {
	id = laws.411
	desc = "EVTDESCLAWS411"
	is_triggered_only = yes
	notification = yes
	
	immediate = { remove_opinion = { who = FROM modifier = opinion_supported_my_faction } }
}
# Inform other vassals
character_event = {
	id = laws.412
	desc = "EVTDESCLAWS412"
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		if = {
			limit = { trait = anti_ruler }
			remove_opinion = { who = FROM modifier = opinion_opposed_my_faction }
		}
		if = {
			limit = { trait = pro_ruler }
			remove_opinion = { who = FROM modifier = opinion_supported_my_faction }
		}
		if = {
			limit = {
				ai = yes
				trait = pro_ruler
				FROM = {
					OR = {
						relative_power_to_liege = 0.25
						is_councillor = yes
					}
				}
			}
			character_event = { id = laws.500 }
		}
	}
}
# A previously ruler-opposing vassal withdraws their opposition
# Inform vassal
character_event = {
	id = laws.413
	desc = "EVTDESCLAWS413"
	is_triggered_only = yes
	
	trigger = { trait = anti_ruler }
	
	option = {
		name = "EVTOPTALAWS413"
		remove_trait = anti_ruler
		hidden_tooltip = {
			character_event = { id = laws.5 } # Clean up cache flags
			liege = { character_event = { id = laws.414 } } # Inform ruler
			any_realm_character = {
				limit = {
					NOT = { character = ROOT }
					same_liege = ROOT
				}
				character_event = { id = laws.415 } # Inform fellow vassals
			}
		}
	}
}
# Inform ruler
character_event = {
	id = laws.414
	desc = "EVTDESCLAWS414"
	is_triggered_only = yes
	notification = yes
	
	immediate = { remove_opinion = { who = FROM modifier = opinion_opposed_my_faction } }
}
# Inform other vassals
character_event = {
	id = laws.415
	desc = "EVTDESCLAWS415"
	is_triggered_only = yes
	notification = yes
	
	immediate = {
		if = {
			limit = { trait = pro_ruler }
			remove_opinion = { who = FROM modifier = opinion_opposed_my_faction }
		}
		if = {
			limit = { trait = anti_ruler }
			remove_opinion = { who = FROM modifier = opinion_supported_my_faction }
		}
		if = {
			limit = {
				ai = yes
				trait = anti_ruler
				FROM = {
					OR = {
						relative_power_to_liege = 0.25
						is_councillor = yes
					}
				}
			}
			character_event = { id = laws.500 }
		}
	}
}

# Generic Side-Taking Event (AI only)
# This event is called for AI vassals and councillors whenever there's a major change
# in the overall state of the crisis. It's also called periodically by itself.
character_event = {
	id = laws.500
	is_triggered_only = yes
	
	trigger = {
		ai = yes
		OR = {
			AND = {
				demesne_size = 1
				OR = {
					any_demesne_title = { higher_tier_than = BARON }
					liege = { primary_title = { tier = COUNT } }
				}
			}
			is_councillor = yes
		}
		liege = {
			NOT = { character = ROOT }
			has_character_modifier = constitutional_crisis
		}
	}
	
	immediate = {
		# Reconsider in roughly two months if not interrupted
		character_event = { id = laws.500 days = 60 random = 30 }
		
		# Remember that you're already on a crisis loop
		clr_character_flag = flag_ai_constitutional_crisis_loop
		set_character_flag = flag_ai_constitutional_crisis_loop
	}
	
	option = {
		trigger = { NOT = { trait = anti_ruler } } # Can't jump more than once in a step
		if = {
			limit = { NOT = { trait = pro_ruler } }
			character_event = { id = laws.300 } # Favor siding with liege
		}
		ai_chance = {
			factor = 10
			# Inertia
			modifier = {
				factor = 10
				trait = pro_ruler
			}
			
			# Is on the ruler's side as a personal favor
			modifier = {
				factor = 10
				liege = { has_opinion_modifier = { who = ROOT modifier = opinion_favor_ongoing_crisis_support } }
			}
			
			# Has a chance to repay a favor
			modifier = {
				factor = 2
				liege = {
					has_opinion_modifier = { who = ROOT modifier = opinion_owes_me_a_favor }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_denied_favor_repayment_0 } }
				}
			}
			modifier = {
				factor = 2
				liege = {
					has_opinion_modifier = { who = ROOT modifier = opinion_owes_me_a_favor }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_denied_favor_repayment_0 } }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_denied_favor_repayment_1 } }
				}
			}
			modifier = {
				factor = 2
				liege = {
					has_opinion_modifier = { who = ROOT modifier = opinion_owes_me_a_favor }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_denied_favor_repayment_0 } }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_denied_favor_repayment_1 } }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_denied_favor_repayment_2 } }
				}
			}
			
			# Desires a favor from the liege
			modifier = {
				factor = 2
				NOT = { has_opinion_modifier = { who = liege modifier = opinion_owes_me_a_favor } }
				NOT = { reverse_has_opinion_modifier = { who = liege modifier = opinion_owes_me_a_favor } }
				OR = {
					trait = ambitious
					any_demesne_title = {
						has_law = succ_appointment
						ROOT = {
							NOT = {
								any_dynasty_member = {
									has_minor_title = title_expected_successor
									liege = { character = ROOT }
								}
							}
							any_dynasty_member = { liege = { character = ROOT } }
						}
					}
					# Assorted other reasons to want a favor
				}
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_rejected_favor_offer_0 } }
			}
			modifier = {
				factor = 2
				NOT = { has_opinion_modifier = { who = liege modifier = opinion_owes_me_a_favor } }
				NOT = { reverse_has_opinion_modifier = { who = liege modifier = opinion_owes_me_a_favor } }
				OR = {
					trait = ambitious
					any_demesne_title = {
						has_law = succ_appointment
						ROOT = {
							NOT = {
								any_dynasty_member = {
									has_minor_title = title_expected_successor
									liege = { character = ROOT }
								}
							}
							any_dynasty_member = { liege = { character = ROOT } }
						}
					}
					# Assorted other reasons to want a favor
				}
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_rejected_favor_offer_0 } }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_rejected_favor_offer_1 } }
			}
			modifier = {
				factor = 2
				NOT = { has_opinion_modifier = { who = liege modifier = opinion_owes_me_a_favor } }
				NOT = { reverse_has_opinion_modifier = { who = liege modifier = opinion_owes_me_a_favor } }
				OR = {
					trait = ambitious
					any_demesne_title = {
						has_law = succ_appointment
						ROOT = {
							NOT = {
								any_dynasty_member = {
									has_minor_title = title_expected_successor
									liege = { character = ROOT }
								}
							}
							any_dynasty_member = { liege = { character = ROOT } }
						}
					}
					# Assorted other reasons to want a favor
				}
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_rejected_favor_offer_0 } }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_rejected_favor_offer_1 } }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_recently_rejected_favor_offer_2 } }
			}
			
			# Opinion of Ruler
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 100 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 90 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 80 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 70 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 30 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 10 }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -9 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -19 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -29 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -39 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -49 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -59 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -69 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -79 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -89 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -99 } }
			}
			
			# Opinion of liege's supporters
			modifier = {
				factor = 2
				pro_ruler = {
					same_liege = ROOT
					reverse_opinion = { who = ROOT value = 50 }
				}
			}
			modifier = {
				factor = 2
				pro_ruler = {
					same_liege = ROOT
					reverse_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 0.5
				pro_ruler = {
					same_liege = ROOT
					NOT = { reverse_opinion = { who = ROOT value = -49 } }
				}
			}
			modifier = {
				factor = 0.5
				pro_ruler = {
					same_liege = ROOT
					NOT = { reverse_opinion = { who = ROOT value = -99 } }
				}
			}
			
			# Legal, public, and federal support
			# Legal support only matters above a certain moral authority threshold
			modifier = {
				factor = 5
				liege = {
					has_character_modifier = crisis_law_for_ruler
					religion_authority = 0.25
					OR = {
						religion = ROOT
						religion_authority = 0.75
					}
				}
				NOT = { trait = pragmatic }
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_law_for_ruler
					religion_authority = 0.25
					OR = {
						religion = ROOT
						religion_authority = 0.75
					}
				}
				trait = radical
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_law_for_ruler
					religion = ROOT
					religion_authority = 0.5
				}
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_law_for_ruler
					religion_authority = 0.75
				}
			}
			modifier = {
				factor = 0.2
				liege = {
					has_character_modifier = crisis_law_against_ruler
					religion_authority = 0.25
					OR = {
						religion = ROOT
						religion_authority = 0.75
					}
				}
				NOT = { trait = pragmatic }
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_law_against_ruler
					religion_authority = 0.25
					OR = {
						religion = ROOT
						religion_authority = 0.75
					}
				}
				trait = radical
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_law_against_ruler
					religion = ROOT
					religion_authority = 0.5
				}
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_law_against_ruler
					religion_authority = 0.75
				}
			}
			
			# Public support matters more for followers of democratic ideologies, less for followers of autocratic ideologies
			# and more for people facing high revolt risk
			# Public support is calculated from the character's location - councillors will sway with the capital, regional governors
			# with their regions.
			modifier = {
				factor = 2
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_for_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_for_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_for_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_for_count }
					}
				}
				NOT = { religion = terran_imperial }
				NOT = { religion = neo_feudal }
				NOT = { religion = astrist }
			}
			modifier = {
				factor = 2
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_for_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_for_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_for_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_for_count }
					}
				}
				OR = {
					religion = terran_federalist
					religion = terran_republican
					religion = colonial_seperatist
				}
				NOT = { trait = pragmatic }
				religion_authority = 0.25
			}
			modifier = {
				factor = 2
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_for_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_for_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_for_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_for_count }
					}
				}
				OR = {
					religion = terran_federalist
					religion = terran_republican
					religion = colonial_seperatist
				}
				OR = {
					trait = radical
					religion_authority = 0.75
				}
			}
			modifier = {
				factor = 2
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_for_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_for_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_for_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_for_count }
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_against_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_against_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_against_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_against_count }
					}
				}
				NOT = { religion = terran_imperial }
				NOT = { religion = neo_feudal }
				NOT = { religion = astrist }
			}
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_against_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_against_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_against_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_against_count }
					}
				}
				OR = {
					religion = terran_federalist
					religion = terran_republican
					religion = colonial_seperatist
				}
				NOT = { trait = pragmatic }
				religion_authority = 0.25
			}
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_against_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_against_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_against_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_against_count }
					}
				}
				OR = {
					religion = terran_federalist
					religion = terran_republican
					religion = colonial_seperatist
				}
				OR = {
					trait = radical
					religion_authority = 0.75
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_against_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_against_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_against_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_against_count }
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			# Effect of liegeliege support depends, obviously, on opinion of liegeliege
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_liege_for_ruler
					liege = { reverse_opinion = { who = ROOT value = 0 } }
				}
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_liege_for_ruler
					liege = { reverse_opinion = { who = ROOT value = 50 } }
				}
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_liege_for_ruler
					liege = { reverse_opinion = { who = ROOT value = 100 } }
				}
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_liege_against_ruler
					liege = { reverse_opinion = { who = ROOT value = 0 } }
				}
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_liege_against_ruler
					liege = { reverse_opinion = { who = ROOT value = 50 } }
				}
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_liege_against_ruler
					liege = { reverse_opinion = { who = ROOT value = 100 } }
				}
			}
			
			# Pressure to avoid the losing side. Increases dramatically under tension.
			# Faction strength is a rough heuristic that measures both the number of important
			# members each faction has, and the strength of the strongest member.
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 2
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 2
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 2
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 4
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 4
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 4
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 6
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 6
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 6
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 8
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 8
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 8
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 10
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 10
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 10
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 12
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 12
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 12
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 14
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 14
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 14
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 16
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 16
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 16
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 18
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 18
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 18
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 20
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 20
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						count = 20
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.1
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.1
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.1
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.2
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.2
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.2
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.3
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.3
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.3
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.4
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.4
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.4
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.5
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.5
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.5
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.6
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.6
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.6
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.7
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.7
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.7
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.8
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.8
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.8
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.9
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.9
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = anti_ruler
						relative_power_to_liege = 0.9
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
		}
	}
	
	option = {
		name = "EVTOPTBLAWS113"
		# Stay neutral or back down from previously having been neutral
		if = {
			limit = { trait = pro_ruler }
			character_event = { id = laws.320 }
		}
		if = {
			limit = { trait = anti_ruler }
			character_event = { id = laws.321 }
		}
		ai_chance = {
			factor = 100
			
			# Inertia
			modifier = {
				factor = 0.1
				OR = {
					trait = pro_ruler
					trait = anti_ruler
				}
			}
			
			# Personality
			modifier = {
				factor = 0.8
				trait = confident
			}
			modifier = {
				factor = 1.25
				trait = neurotic
			}
			modifier = {
				factor = 0.8
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
		}
	}
	
	option = {
		name = "EVTOPTCLAWS113"
		trigger = { NOT = { trait = pro_ruler } } # Can't jump more than once in a step
		if = {
			limit = { NOT = { trait = anti_ruler } }
			character_event = { id = laws.310 } # Side against liege
		}
		ai_chance = {
			factor = 10
			# Inertia
			modifier = {
				factor = 10
				trait = anti_ruler
			}
			
			# Opinion of Ruler
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 100 }
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 90 }
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 80 }
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 70 }
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 30 }
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 10 }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -9 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -19 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -29 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -39 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -49 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -59 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -69 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -79 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -89 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -99 } }
			}
			
			# Opinion of liege's supporters
			modifier = {
				factor = 0.5
				pro_ruler = {
					same_liege = ROOT
					reverse_opinion = { who = ROOT value = 50 }
				}
			}
			modifier = {
				factor = 0.5
				pro_ruler = {
					same_liege = ROOT
					reverse_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 2
				pro_ruler = {
					same_liege = ROOT
					NOT = { reverse_opinion = { who = ROOT value = -49 } }
				}
			}
			modifier = {
				factor = 2
				pro_ruler = {
					same_liege = ROOT
					NOT = { reverse_opinion = { who = ROOT value = -99 } }
				}
			}
			
			# Legal, public, and federal support
			# Legal support only matters above a certain moral authority threshold
			modifier = {
				factor = 5
				liege = {
					has_character_modifier = crisis_law_against_ruler
					religion_authority = 0.25
					OR = {
						religion = ROOT
						religion_authority = 0.75
					}
				}
				NOT = { trait = pragmatic }
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_law_against_ruler
					religion_authority = 0.25
					OR = {
						religion = ROOT
						religion_authority = 0.75
					}
				}
				trait = radical
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_law_against_ruler
					religion = ROOT
					religion_authority = 0.5
				}
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_law_against_ruler
					religion_authority = 0.75
				}
			}
			modifier = {
				factor = 0.2
				liege = {
					has_character_modifier = crisis_law_for_ruler
					religion_authority = 0.25
					OR = {
						religion = ROOT
						religion_authority = 0.75
					}
				}
				NOT = { trait = pragmatic }
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_law_for_ruler
					religion_authority = 0.25
					OR = {
						religion = ROOT
						religion_authority = 0.75
					}
				}
				trait = radical
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_law_for_ruler
					religion = ROOT
					religion_authority = 0.5
				}
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_law_for_ruler
					religion_authority = 0.75
				}
			}
			
			# Public support matters more for followers of democratic ideologies, less for followers of autocratic ideologies
			# and more for people facing high revolt risk
			# Public support is calculated from the character's location - councillors will sway with the capital, regional governors
			# with their regions.
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_for_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_for_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_for_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_for_count }
					}
				}
				NOT = { religion = terran_imperial }
				NOT = { religion = neo_feudal }
				NOT = { religion = astrist }
			}
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_for_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_for_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_for_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_for_count }
					}
				}
				OR = {
					religion = terran_federalist
					religion = terran_republican
					religion = colonial_seperatist
				}
				NOT = { trait = pragmatic }
				religion_authority = 0.25
			}
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_for_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_for_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_for_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_for_count }
					}
				}
				OR = {
					religion = terran_federalist
					religion = terran_republican
					religion = colonial_seperatist
				}
				OR = {
					trait = radical
					religion_authority = 0.75
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_for_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_for_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_for_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_for_count }
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 2
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_against_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_against_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_against_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_against_count }
					}
				}
				NOT = { religion = terran_imperial }
				NOT = { religion = neo_feudal }
				NOT = { religion = astrist }
			}
			modifier = {
				factor = 2
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_against_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_against_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_against_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_against_count }
					}
				}
				OR = {
					religion = terran_federalist
					religion = terran_republican
					religion = colonial_seperatist
				}
				NOT = { trait = pragmatic }
				religion_authority = 0.25
			}
			modifier = {
				factor = 2
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_against_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_against_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_against_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_against_count }
					}
				}
				OR = {
					religion = terran_federalist
					religion = terran_republican
					religion = colonial_seperatist
				}
				OR = {
					trait = radical
					religion_authority = 0.75
				}
			}
			modifier = {
				factor = 2
				OR = {
					AND = {
						liege = { has_character_flag = flag_crisis_emperor }
						location = { has_province_modifier = public_against_emperor }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_king }
						location = { has_province_modifier = public_against_king }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_duke }
						location = { has_province_modifier = public_against_duke }
					}
					AND = {
						liege = { has_character_flag = flag_crisis_count }
						location = { has_province_modifier = public_against_count }
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			# Effect of liegeliege support depends, obviously, on opinion of liegeliege
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_liege_for_ruler
					liege = { reverse_opinion = { who = ROOT value = 0 } }
				}
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_liege_for_ruler
					liege = { reverse_opinion = { who = ROOT value = 50 } }
				}
			}
			modifier = {
				factor = 0.5
				liege = {
					has_character_modifier = crisis_liege_for_ruler
					liege = { reverse_opinion = { who = ROOT value = 100 } }
				}
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_liege_against_ruler
					liege = { reverse_opinion = { who = ROOT value = 0 } }
				}
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_liege_against_ruler
					liege = { reverse_opinion = { who = ROOT value = 50 } }
				}
			}
			modifier = {
				factor = 2
				liege = {
					has_character_modifier = crisis_liege_against_ruler
					liege = { reverse_opinion = { who = ROOT value = 100 } }
				}
			}
			
			# Pressure to avoid the losing side. Increases dramatically under tension.
			# Faction strength is a rough heuristic that measures both the number of important
			# members each faction has, and the strength of the strongest member.
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 2
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 2
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 2
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 4
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 4
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 4
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 6
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 6
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 6
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 8
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 8
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 8
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 10
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 10
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 10
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 12
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 12
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 12
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 14
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 14
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 14
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 16
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 16
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 16
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 18
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 18
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 18
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 20
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 20
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						count = 20
					}
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.1
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.1
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.1
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.2
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.2
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.2
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.3
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.3
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.3
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.4
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.4
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.4
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.5
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.5
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.5
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.6
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.6
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.6
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.7
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.7
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.7
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.8
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.8
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.8
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.8
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.9
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { trait = slow }
			}
			modifier = {
				factor = 0.5
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.9
					}
				}
				location = { revolt_risk = 0.25 }
				NOT = { trait = radical }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
			modifier = {
				factor = 0.25
				liege = {
					any_vassal = {
						trait = pro_ruler
						relative_power_to_liege = 0.9
					}
				}
				NOT = { trait = radical }
				OR = {
					NOT = { religion_authority = 0.5 }
					trait = pragmatic
					trait = ambitious
				}
				location = { revolt_risk = 0.5 }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
			}
		}
	}
}

# AI just became important in the middle of a constitutional crisis, deal with the situation
character_event = {
	id = laws.501
	hide_window = yes
	
	ai = yes
	
	trigger = {
		liege = {
			NOT = { character = ROOT }
			has_character_modifier = constitutional_crisis
		}
		OR = {
			NOT = { has_character_flag = flag_ai_constitutional_crisis_loop }
			had_character_flag = { flag = flag_ai_constitutional_crisis_loop days = 120 }
		}
		OR = {
			AND = {
				demesne_size = 1
				OR = {
					any_demesne_title = { higher_tier_than = baron }
					liege = { primary_title = { tier = count } }
				}
			}
			is_councillor = yes
		}
	}
	
	immediate = { character_event = { id = laws.500 } }
}

# Peaceful ends for constitutional crises
# There are no free members of the anti-ruler faction left!
character_event = {
	id = laws.1000
	desc = "EVTDESCLAWS1000"
	picture = GFX_evt_speech
	
	only_rulers = yes
	
	trigger = {
		has_character_modifier = constitutional_crisis
		OR = {
			had_character_flag = { flag = flag_crisis_timer days = 60 } # Must allow time for AI to take sides
			has_character_flag = flag_successful_purge
			has_character_flag = flag_civil_war_victory
		}
		NOT = {
			anti_ruler = {
				liege = { character = ROOT }
				prisoner = no
			}
		}
	}
	
	immediate = {
		clr_character_flag = flag_successful_purge
		clr_character_flag = flag_civil_war_victory
	}
	
	option = {
		name = "EVTOPTALAWS1000"
		# Do something based on whatever the crisis was about
		if = {
			# Successfully defied term length. Terms are now for life!
			limit = { has_character_flag = flag_term_limit_defied }
			any_demesne_title = {
				limit = {
					OR = {
						has_law = term_length_0
						has_law = term_length_1
						has_law = term_length_2
						has_law = term_length_3
					}
				}
				add_law = term_length_4
			}
			any_demesne_title = {
				limit = {
					OR = {
						has_law = local_term_length_0
						has_law = local_term_length_1
						has_law = local_term_length_2
						has_law = local_term_length_3
					}
				}
				add_law = local_term_length_4
			}
			clr_character_flag = flag_term_limit_defied
		}
		# Crisis official ends
		remove_character_modifier = constitutional_crisis
		character_event = { id = laws.6 tooltip = "EVTTOOLTIPLAWS6" } # Clean up any leftover flags
		# Clean up everything else
		hidden_tooltip = {
			any_realm_character = {
				limit = { liege = { character = ROOT } }
				reverse_remove_opinion = { who = ROOT modifier = opinion_favor_ongoing_crisis_support }
				character_event = { id = laws.1001 } # Inform vassals that crisis has ended
			}
			liege = {
				character_event = { id = laws.1002 }
				reverse_remove_opinion = { who = ROOT modifier = opinion_favor_ongoing_crisis_support }
			}
			any_realm_province = {
				limit = { any_province_lord = { character = ROOT } }
				province_event = { id = laws.1 }
			}
		}
	}
}

# Pro-ruler faction victorious: Inform vassals
character_event = {
	id = laws.1001
	desc = "EVTDESCLAWS1001"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		hidden_tooltip = { character_event = { id = laws.0 } } # Crisis over, clean up everything
	}
}
character_event = {
	id = laws.1002
	desc = "EVTDESCLAWS1002"
	is_triggered_only = yes
	
	option = { name = "EVTOPTCONFIRM" }
}

# Ruler backs down
character_event = {
	id = laws.1010
	desc = "EVTDESCLAWS1010"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		clr_character_flag = flag_making_crisis_decision
		clr_character_flag = flag_constitutional_crisis_forced_defeat
		# Do something based on whatever the crisis was about
		if = {
			limit = { has_character_flag = flag_term_limit_defied }
			character_event = { id = laws.100 tooltip = "EVTTOOLTIPLAWS100" } # Hold elections
			clr_character_flag = flag_term_limit_defied
		}
		# Crisis officially ends
		remove_character_modifier = constitutional_crisis
		character_event = { id = laws.6 tooltip = "EVTTOOLTIPLAWS6" } # Clean up any leftover flags
		# Clean up everything else
		hidden_tooltip = {
			any_realm_character = {
				limit = { liege = { character = ROOT } }
				reverse_remove_opinion = { who = ROOT modifier = opinion_favor_ongoing_crisis_support }
				character_event = { id = laws.1011 } # Inform vassals that crisis has ended
			}
			liege = {
				character_event = { id = laws.1012 }
				reverse_remove_opinion = { who = ROOT modifier = opinion_favor_ongoing_crisis_support }
			}
		}
	}
	
	option = {
		trigger = { NOT = { has_character_flag = flag_constitutional_crisis_forced_defeat } } # Only available when triggered from decision menu
		name = "EVTOPTNEVERMIND"
		clr_character_flag = flag_making_crisis_decision
		ai_chance = { factor = 0 }
	}
}

# Anti-ruler faction victorious: Inform vassals
character_event = {
	id = laws.1011
	desc = "EVTDESCLAWS1011"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTCONFIRM"
		hidden_tooltip = { character_event = { id = laws.0 } } # Crisis over, clean up everything
	}
}
character_event = {
	id = laws.1012
	desc = "EVTDESCLAWS1012"
	is_triggered_only = yes
	
	option = { name = "EVTOPTCONFIRM" }
}